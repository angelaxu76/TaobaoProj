Index: brands/ecco/ecco_pipeline_runner.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import os\r\nimport subprocess\r\nfrom config import ECCO\r\nfrom pathlib import Path\r\nfrom common_taobao.generate_discount_price_excel import export_store_discount_price\r\nfrom common_taobao.export_skuid_stock import export_skuid_stock_excel\r\nfrom common_taobao.import_txt_to_db import import_txt_to_db\r\nfrom common_taobao.prepare_utils_extended import generate_product_excels, copy_images_for_store, get_publishable_product_codes\r\nfrom common_taobao.backup_and_clear import backup_and_clear_brand_dirs  # âœ… æ–°å¢å¯¼å…¥\r\n\r\ndef run_script(filename: str):\r\n    path = os.path.join(os.path.dirname(__file__), filename)\r\n    print(f\"âš™\uFE0F æ‰§è¡Œè„šæœ¬: {filename}\")\r\n    subprocess.run([\"python\", path], check=True)\r\n\r\ndef main():\r\n    print(\"\\n\uD83D\uDFE1 Step: 1\uFE0Fâƒ£ æ¸…ç©º TXT + å‘å¸ƒç›®å½•\")\r\n    #backup_and_clear_brand_dirs(ECCO)  # âœ… ä½¿ç”¨å…±äº«æ–¹æ³•\r\n\r\n    print(\"\\n\uD83D\uDFE1 Step: 2\uFE0Fâƒ£ æŠ“å–å•†å“é“¾æ¥\")\r\n    #run_script(\"unified_link_collector.py\")\r\n\r\n    print(\"\\n\uD83D\uDFE1 Step: 3\uFE0Fâƒ£ æŠ“å–å•†å“ä¿¡æ¯\")\r\n    #run_script(\"fetch_product_info.py\")\r\n\r\n    print(\"\\n\uD83D\uDFE1 Step: 4\uFE0Fâƒ£ å¯¼å…¥ TXT â†’ æ•°æ®åº“\")\r\n    import_txt_to_db(\"ecco\")\r\n\r\n    print(\"\\n\uD83D\uDFE1 Step: 5\uFE0Fâƒ£ å¯¼å‡ºä»·æ ¼ Excel\")\r\n\r\n    print(\"\\n\uD83D\uDFE1 Step: 6\uFE0Fâƒ£ å¯¼å‡ºåº“å­˜ Excel\")\r\n    export_skuid_stock_excel(\"ecco\")\r\n\r\n    print(\"\\n\uD83D\uDFE1 Step: 7\uFE0Fâƒ£ ä¸ºå„åº—é“ºç”Ÿæˆä¸Šæ¶ Excel + æ‹·è´å›¾ç‰‡\")\r\n    store_list = [\"äº”å°å‰‘\", \"è‹±å›½ä¼¦æ•¦ä»£è´­2015\"]\r\n    for store in store_list:\r\n        export_store_discount_price(\"ecco\",store)\r\n        generate_product_excels(ECCO, store)\r\n        codes = get_publishable_product_codes(ECCO, store)\r\n        copy_images_for_store(ECCO, store, codes)\r\n\r\n    print(\"\\nâœ… ECCO pipeline å®Œæˆ\")\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/brands/ecco/ecco_pipeline_runner.py b/brands/ecco/ecco_pipeline_runner.py
--- a/brands/ecco/ecco_pipeline_runner.py	(revision 4e56cc6ced59a537762975deaf3f3e2abdf529de)
+++ b/brands/ecco/ecco_pipeline_runner.py	(date 1750935852267)
@@ -15,13 +15,13 @@
 
 def main():
     print("\nğŸŸ¡ Step: 1ï¸âƒ£ æ¸…ç©º TXT + å‘å¸ƒç›®å½•")
-    #backup_and_clear_brand_dirs(ECCO)  # âœ… ä½¿ç”¨å…±äº«æ–¹æ³•
+    backup_and_clear_brand_dirs(ECCO)  # âœ… ä½¿ç”¨å…±äº«æ–¹æ³•
 
     print("\nğŸŸ¡ Step: 2ï¸âƒ£ æŠ“å–å•†å“é“¾æ¥")
-    #run_script("unified_link_collector.py")
+    run_script("unified_link_collector.py")
 
     print("\nğŸŸ¡ Step: 3ï¸âƒ£ æŠ“å–å•†å“ä¿¡æ¯")
-    #run_script("fetch_product_info.py")
+    run_script("fetch_product_info.py")
 
     print("\nğŸŸ¡ Step: 4ï¸âƒ£ å¯¼å…¥ TXT â†’ æ•°æ®åº“")
     import_txt_to_db("ecco")
Index: brands/clarks/clarks_pipeline_runner.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import os\r\nimport shutil\r\nimport subprocess\r\nfrom datetime import datetime\r\nfrom config import CLARKS\r\nfrom common_taobao.generate_discount_price_excel import export_store_discount_price\r\nfrom common_taobao.export_skuid_stock import export_skuid_stock_excel\r\nfrom common_taobao.import_txt_to_db import import_txt_to_db\r\nfrom common_taobao.prepare_utils_extended import generate_product_excels, copy_images_for_store, get_publishable_product_codes\r\nfrom pathlib import Path\r\n\r\nBASE_DIR = CLARKS[\"BASE\"]\r\nPUBLICATION_DIR = BASE_DIR / \"publication\"\r\nREPUB_DIR = BASE_DIR / \"repulibcation\"\r\nBACKUP_DIR = BASE_DIR / \"backup\"\r\n\r\ndef backup_and_clear_dir(dir_path: Path, name: str):\r\n    if not dir_path.exists():\r\n        print(f\"âš \uFE0F ç›®å½•ä¸å­˜åœ¨: {dir_path}ï¼Œè·³è¿‡\")\r\n        return\r\n\r\n    timestamp = datetime.now().strftime(\"%Y%m%d_%H%M%S\")\r\n    backup_path = BACKUP_DIR / timestamp / name\r\n    shutil.copytree(dir_path, backup_path)\r\n    print(f\"\uD83D\uDCE6 å·²å¤‡ä»½: {dir_path} â†’ {backup_path}\")\r\n    for item in dir_path.iterdir():\r\n        if item.is_dir():\r\n            shutil.rmtree(item)\r\n        else:\r\n            item.unlink()\r\n    print(f\"\uD83E\uDDF9 å·²æ¸…ç©ºç›®å½•: {name}\")\r\n\r\ndef run_script(filename: str):\r\n    path = os.path.join(os.path.dirname(__file__), filename)\r\n    print(f\"âš™\uFE0F æ‰§è¡Œè„šæœ¬: {filename}\")\r\n    subprocess.run([\"python\", path], check=True)\r\n\r\ndef main():\r\n    print(\"\\n\uD83D\uDFE1 Step: 1\uFE0Fâƒ£ æ¸…ç©ºå‘å¸ƒç›®å½•\")\r\n    if REPUB_DIR.exists():\r\n        store_list = [folder.name for folder in REPUB_DIR.iterdir() if folder.is_dir()]\r\n        for store in store_list:\r\n            backup_and_clear_dir(REPUB_DIR / store, f\"repulibcation/{store}\")\r\n    else:\r\n        print(f\"âš \uFE0F å‘å¸ƒç›®å½•ä¸å­˜åœ¨: {REPUB_DIR}ï¼Œè·³è¿‡\")\r\n\r\n    print(\"\\n\uD83D\uDFE1 Step: 2\uFE0Fâƒ£ æŠ“å–å•†å“é“¾æ¥\")\r\n\r\n    run_script(\"unified_link_collector.py\")\r\n\r\n    print(\"\\n\uD83D\uDFE1 Step: 3\uFE0Fâƒ£ æŠ“å–å•†å“ä¿¡æ¯\")\r\n    run_script(\"fetch_product_info.py\")\r\n\r\n    print(\"\\n\uD83D\uDFE1 Step: 4\uFE0Fâƒ£ å¯¼å…¥ TXT â†’ æ•°æ®åº“\")\r\n    import_txt_to_db(\"clarks\")\r\n\r\n    print(\"\\n\uD83D\uDFE1 Step: 5\uFE0Fâƒ£ å¯¼å‡ºä»·æ ¼ Excel\")\r\n    export_store_discount_price(\"clarks\")\r\n\r\n    print(\"\\n\uD83D\uDFE1 Step: 6\uFE0Fâƒ£ å¯¼å‡ºåº“å­˜ Excel\")\r\n    export_skuid_stock_excel(\"clarks\")\r\n\r\n    print(\"\\n\uD83D\uDFE1 Step: 7\uFE0Fâƒ£ ä¸ºå„åº—é“ºç”Ÿæˆä¸Šæ¶ Excel + æ‹·è´å›¾ç‰‡\")\r\n    # æ‰‹åŠ¨æŒ‡å®šè°ƒè¯•åº—é“º\r\n    store_list = [\"äº”å°å‰‘\", \"è‹±å›½ä¼¦æ•¦ä»£è´­2015\"]\r\n    for store in store_list:\r\n        generate_product_excels(CLARKS, store)\r\n        codes = get_publishable_product_codes(CLARKS, store)\r\n        copy_images_for_store(CLARKS, store, codes)\r\n\r\n    print(\"\\nâœ… Clarks pipeline å®Œæˆ\")\r\n\r\nif __name__ == \"__main__\":\r\n    main()
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/brands/clarks/clarks_pipeline_runner.py b/brands/clarks/clarks_pipeline_runner.py
--- a/brands/clarks/clarks_pipeline_runner.py	(revision 4e56cc6ced59a537762975deaf3f3e2abdf529de)
+++ b/brands/clarks/clarks_pipeline_runner.py	(date 1750934842675)
@@ -38,15 +38,15 @@
 def main():
     print("\nğŸŸ¡ Step: 1ï¸âƒ£ æ¸…ç©ºå‘å¸ƒç›®å½•")
     if REPUB_DIR.exists():
-        store_list = [folder.name for folder in REPUB_DIR.iterdir() if folder.is_dir()]
-        for store in store_list:
-            backup_and_clear_dir(REPUB_DIR / store, f"repulibcation/{store}")
+         store_list = [folder.name for folder in REPUB_DIR.iterdir() if folder.is_dir()]
+        #  for store in store_list:
+    #    backup_and_clear_dir(REPUB_DIR / store, f"repulibcation/{store}")
     else:
         print(f"âš ï¸ å‘å¸ƒç›®å½•ä¸å­˜åœ¨: {REPUB_DIR}ï¼Œè·³è¿‡")
 
     print("\nğŸŸ¡ Step: 2ï¸âƒ£ æŠ“å–å•†å“é“¾æ¥")
 
-    run_script("unified_link_collector.py")
+    # run_script("unified_link_collector.py")
 
     print("\nğŸŸ¡ Step: 3ï¸âƒ£ æŠ“å–å•†å“ä¿¡æ¯")
     run_script("fetch_product_info.py")
